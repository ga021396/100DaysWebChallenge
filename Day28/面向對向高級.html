<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>DAY29</title>
</head>
    <style>
        #div{top: 100px;
            height: 200px;
            width: 200px;
            background-color: cornsilk;
        position: absolute;}
        #div2{
            left: 100px;
            height: 200px;
            width: 200px;
            background-color: cornsilk;
               position: absolute;
        }
    </style>
<body>
<div id="div2"></div>
<div id="div"></div>
<input type="button" id="btn">
<script>
    window.onload=function(){
    new drag("div");
    new drag('div2');
    var sq=new square("div");
    var sq2=new square("div2");
    var btn=document.getElementById('btn');
        btn.onclick=function(){
            sq2.ChangeColor("black");
            sq.ChangeColor("green");
        }
    }
    {
     function square(id,name){//建立物件
         this.squ=document.getElementById(id);
     }   
     square.prototype.ChangeColor=function(color){
         this.squ.style.backgroundColor=color;
         alert(this.name);
     }
    }
    {
    function drag(id){
        
        var _this=this;
        this.disX=0;
        this.disY=0;
        this.div=document.getElementById(id);
        this.div.onmousedown=function(ev){
            _this.down(ev);
        }
    }
    drag.prototype.down=function(ev){
        var _this=this;
        this.disX=ev.clientX-this.div.offsetLeft;
        this.disY=ev.clientY-this.div.offsetTop;
        
        document.onmousemove=function(ev){
            _this.move(ev);
        }
        document.onmouseup=function(){
            _this.up();
        }
        
    }
    drag.prototype.move=function(ev){
        this.div.style.left=ev.clientX-this.disX+'px';
        this.div.style.top=ev.clientY-this.disY+'px';
    }
    drag.prototype.up=function(){
         document.onmousemove=null;
         document.onmouseup=null;
    }}
</script>
</body>
</html>
